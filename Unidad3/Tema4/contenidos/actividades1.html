<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Actividad: ¿Qué es la Autoevaluación?</title>
  <style>
    /* Estilos generales (adaptados del diseño anterior) */
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --primary:#1d4ed8;
      --muted:#475569;
      --ok:#15803d;
      --bad:#dc2626;
      --accent:#0284c7;
    }
    body{
      font-family:"Poppins",sans-serif;
      background:var(--bg);
      color:var(--muted);
      margin:0;
      padding:28px;
      -webkit-font-smoothing:antialiased;
    }
    .container{
      max-width:1000px;
      margin:0 auto;
    }
    .actividad{
      background:var(--card);
      border-radius:16px;
      padding:26px;
      box-shadow:0 6px 18px rgba(2,6,23,0.07);
    }
    h1{
      text-align:center;
      color:var(--primary);
      margin:0 0 8px 0;
      font-size:26px;
    }
    p.lead{
      text-align:center;
      margin:0 0 20px;
      color:var(--muted);
    }
    iframe.video{
      display:block;
      margin:0 auto 20px auto;
      width:100%;
      max-width:820px;
      height:460px;
      border-radius:10px;
      border:0;
    }

    .pregunta{
      background:#f1f5f9;
      border-radius:12px;
      padding:16px;
      margin-bottom:18px;
    }
    .pregunta p{
      margin:0 0 8px 0;
      font-weight:600;
    }
    /* Drag & drop layout */
    .grid{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:flex-start;
    }
    .zona-soltar{
      flex:1 1 48%;
      min-height:56px;
      border:2px dashed #94a3b8;
      background:#f8fafc;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:8px;
      text-align:center;
      transition:all .18s;
    }
    .zona-soltar.over{
      background:#dbeafe;
      border-color:var(--primary);
    }
    .zona-arrastre{
      display:flex;
      gap:8px;
      flex:1 1 48%;
      flex-wrap:wrap;
      justify-content:center;
      padding:6px;
    }
    .opcion{
      background:#e0f2fe;
      border:2px solid var(--accent);
      border-radius:10px;
      padding:8px 10px;
      cursor:grab;
      user-select:none;
    }
    .opcion[draggable="false"]{ cursor:default; opacity:0.85; }
    .retro{
      margin-top:8px;
      font-weight:600;
    }
    .correcto{ color:var(--ok); }
    .incorrecto{ color:var(--bad); }

    /* Multiple choice and inputs */
    .choices{ display:flex; gap:12px; flex-direction:column; }
    label.choice{
      background:#fff;
      border-radius:8px;
      padding:8px 10px;
      border:1px solid #e2e8f0;
      cursor:pointer;
      display:block;
    }
    .short{
      width:100%;
      padding:8px;
      border-radius:8px;
      border:1px solid #cbd5e1;
      font-size:14px;
    }

    button.verify{
      display:block;
      margin:16px auto 4px;
      padding:12px 22px;
      background:var(--primary);
      color:white;
      border:0;
      border-radius:10px;
      cursor:pointer;
      font-size:16px;
    }
    .resultado{
      text-align:center;
      font-weight:700;
      margin-top:10px;
    }

    footer.note{
      text-align:center;
      margin-top:14px;
      font-size:13px;
      color:#64748b;
    }

    @media (max-width:640px){
      .zona-soltar, .zona-arrastre { flex-basis:100%; }
      iframe.video{ height:260px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="actividad" role="main" aria-labelledby="titulo">
      <h1 id="titulo">Actividad: ¿Qué es la Autoevaluación?</h1>
      <p class="lead"><strong>Mira el video sugerido y responde las 10 preguntas con honestidad.</strong>  Recibirás retroalimentación inmediata.</p>

      <!-- VIDEO: reemplaza el src si deseas otro video. -->
      <iframe class="video" src="https://www.youtube.com/embed/Vx0DAHRoL5c" title="Video: Autoevaluación - cómo hacerla" allowfullscreen></iframe>

      <!-- PREGUNTA 1 (Arrastrar) -->
      <div class="pregunta" id="q1">
        <p>1. El proceso mediante el cual una persona examina y valora su propio trabajo y resultados se llama:</p>
        <div class="grid">
          <div class="zona-soltar" data-correcta="Autoevaluación" aria-label="Zona para soltar respuesta 1"></div>
          <div class="zona-arrastre" aria-hidden="false">
            <div class="opcion" draggable="true">Evaluación externa</div>
            <div class="opcion" draggable="true">Autoevaluación</div>
            <div class="opcion" draggable="true">Evaluación diagnóstica</div>
          </div>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 2 (Multiple choice) -->
      <div class="pregunta" id="q2">
        <p>2. ¿Cuál de estas acciones <strong>no</strong> forma parte del proceso de autoevaluación?</p>
        <div class="choices" role="radiogroup" aria-label="Opciones pregunta 2">
          <label class="choice"><input type="radio" name="q2" value="a"> a) Observarse a sí mismo con honestidad</label>
          <label class="choice"><input type="radio" name="q2" value="b"> b) Comparar lo logrado con lo esperado</label>
          <label class="choice"><input type="radio" name="q2" value="c"> c) Depender exclusivamente de la opinión del docente</label>
          <label class="choice"><input type="radio" name="q2" value="d"> d) Plantearse acciones para mejorar</label>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 3 (Respuesta corta) -->
      <div class="pregunta" id="q3">
        <p>3. Define con tus propias palabras <strong>metacognición</strong> en el contexto de la autoevaluación (respuesta corta).</p>
        <input class="short" type="text" id="q3_input" placeholder="Escribe una o dos frases..." aria-label="Respuesta corta metacognición">
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 4 (Verdadero/Falso) -->
      <div class="pregunta" id="q4">
        <p>4. (V/F) La autoevaluación solo es útil en evaluaciones escritas; no tiene relevancia en trabajos prácticos.</p>
        <div>
          <label class="choice"><input type="radio" name="q4" value="V"> Verdadero</label>
          <label class="choice"><input type="radio" name="q4" value="F"> Falso</label>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 5 (Arrastrar) -->
      <div class="pregunta" id="q5">
        <p>5. Selecciona la herramienta que ayuda a hacer una autoevaluación más objetiva:</p>
        <div class="grid">
          <div class="zona-soltar" data-correcta="Rúbrica de desempeño" aria-label="Zona para soltar respuesta 5"></div>
          <div class="zona-arrastre">
            <div class="opcion" draggable="true">Opiniones sin criterio</div>
            <div class="opcion" draggable="true">Rúbrica de desempeño</div>
            <div class="opcion" draggable="true">Adivinaciones</div>
          </div>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 6 (Multiple choice) -->
      <div class="pregunta" id="q6">
        <p>6. Señala dos beneficios que trae la práctica regular de la autoevaluación (elige la mejor opción):</p>
        <div class="choices" role="radiogroup" aria-label="Opciones pregunta 6">
          <label class="choice"><input type="radio" name="q6" value="a"> a) Autonomía y autoconocimiento</label>
          <label class="choice"><input type="radio" name="q6" value="b"> b) Desmotivación y dependencia</label>
          <label class="choice"><input type="radio" name="q6" value="c"> c) Confusión y falta de metas</label>
          <label class="choice"><input type="radio" name="q6" value="d"> d) Evitar tomar decisiones</label>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 7 (Respuesta corta) -->
      <div class="pregunta" id="q7">
        <p>7. ¿Qué significa <strong>autorregulación</strong> dentro de la autoevaluación? (respuesta corta)</p>
        <input class="short" type="text" id="q7_input" placeholder="Escribe tu respuesta..." aria-label="Respuesta corta autorregulación">
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 8 (Verdadero/Falso) -->
      <div class="pregunta" id="q8">
        <p>8. (V/F) Para que la autoevaluación funcione, es importante la honestidad y la humildad.</p>
        <div>
          <label class="choice"><input type="radio" name="q8" value="V"> Verdadero</label>
          <label class="choice"><input type="radio" name="q8" value="F"> Falso</label>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 9 (Arrastrar) -->
      <div class="pregunta" id="q9">
        <p>9. Una práctica útil para aprender de los errores es:</p>
        <div class="grid">
          <div class="zona-soltar" data-correcta="Registro de errores y soluciones" aria-label="Zona para soltar respuesta 9"></div>
          <div class="zona-arrastre">
            <div class="opcion" draggable="true">Registro de errores y soluciones</div>
            <div class="opcion" draggable="true">Ignorar los errores</div>
            <div class="opcion" draggable="true">Ocultar el proceso</div>
          </div>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <!-- PREGUNTA 10 (Multiple choice) -->
      <div class="pregunta" id="q10">
        <p>10. ¿Cuál es la actitud correcta ante la autoevaluación para que sea efectiva?</p>
        <div class="choices" role="radiogroup" aria-label="Opciones pregunta 10">
          <label class="choice"><input type="radio" name="q10" value="a"> a) Negar los errores</label>
          <label class="choice"><input type="radio" name="q10" value="b"> b) Ser deshonesto con uno mismo</label>
          <label class="choice"><input type="radio" name="q10" value="c"> c) Tener humildad y responsabilidad</label>
          <label class="choice"><input type="radio" name="q10" value="d"> d) Evitar confrontar los resultados</label>
        </div>
        <div class="retro" aria-live="polite"></div>
      </div>

      <button class="verify" id="verificar" type="button">Verificar respuestas</button>
      <div class="resultado" id="resultado" aria-live="polite"></div>
      <footer class="note">Trabaja con honestidad. La autoevaluación es una herramienta para mejorar, no para juzgarte duramente.</footer>
    </div>
  </div>

  <script>
    /* ------- Lógica drag & drop ------- */
    const opciones = document.querySelectorAll('.opcion');
    opciones.forEach(op => {
      op.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', e.target.textContent);
        // store the source element id text to allow reverting if needed
        e.dataTransfer.effectAllowed = "move";
      });
      // Make keyboard-accessible: allow click to "select" and then click a drop zone to place.
      op.addEventListener('click', (e)=>{
        // toggle selected class
        opciones.forEach(x=>x.classList.remove('selected'));
        e.currentTarget.classList.add('selected');
      });
    });

    // drop zones
    const zonas = document.querySelectorAll('.zona-soltar');
    zonas.forEach(z => {
      z.addEventListener('dragover', e => e.preventDefault());
      z.addEventListener('dragenter', e => { e.preventDefault(); z.classList.add('over'); });
      z.addEventListener('dragleave', () => z.classList.remove('over'));
      z.addEventListener('drop', e => {
        e.preventDefault();
        z.classList.remove('over');
        const texto = e.dataTransfer.getData('text/plain');
        if (texto) z.textContent = texto;
      });

      // keyboard interaction: allow placing a previously clicked .opcion
      z.addEventListener('click', ()=>{
        const sel = document.querySelector('.opcion.selected');
        if(sel){
          z.textContent = sel.textContent;
          sel.classList.remove('selected');
        }
      });
    });

    /* ------- Verificación de respuestas ------- */
    function cleanText(t){ return (t||'').toString().trim().toLowerCase(); }

    function verificarShortAnswer(text, keywords){
      // keywords: array of required words (lowercase)
      const t = cleanText(text);
      if(!t) return false;
      // check that at least one keyword appears (or all?), we'll accept if at least one meaningful keyword present
      let found = 0;
      for(const k of keywords){
        if(t.includes(k)) found++;
      }
      // require at least one keyword for short answers (keeps it flexible)
      return found >= 1;
    }

    document.getElementById('verificar').addEventListener('click', ()=>{
      let correctas = 0;
      const total = 10;

      // Q1: drag
      const q1_zone = document.querySelector('#q1 .zona-soltar');
      const q1_retro = document.querySelector('#q1 .retro');
      if (cleanText(q1_zone.textContent) === cleanText(q1_zone.dataset.correcta)) {
        q1_retro.textContent = "✅ Correcto: Autoevaluación.";
        q1_retro.className = "retro correcto";
        correctas++;
      } else {
        q1_retro.innerHTML = `❌ Incorrecto. Respuesta: <b>${q1_zone.dataset.correcta}</b>`;
        q1_retro.className = "retro incorrecto";
      }

      // Q2: multiple choice (c is correct)
      const q2_val = (document.querySelector('input[name="q2"]:checked')||{}).value;
      const q2_retro = document.querySelector('#q2 .retro');
      if (q2_val === "c") {
        q2_retro.textContent = "✅ Correcto. Depender exclusivamente del docente no es autoevaluación.";
        q2_retro.className = "retro correcto";
        correctas++;
      } else {
        q2_retro.textContent = "❌ Incorrecto. La respuesta correcta es c) Depender exclusivamente de la opinión del docente.";
        q2_retro.className = "retro incorrecto";
      }

      // Q3: short (keywords: pensar, reflexionar, conocer, pensamiento, metacognición)
      const q3_txt = document.getElementById('q3_input').value;
      const q3_retro = document.querySelector('#q3 .retro');
      if (verificarShortAnswer(q3_txt, ['pensar','reflex','metacogn','conocer','autorreflex'])) {
        q3_retro.textContent = "✅ Buena definición: incluye la idea de 'pensar sobre el propio pensamiento' o reflexionar sobre cómo aprendemos.";
        q3_retro.className = "retro correcto";
        correctas++;
      } else {
        q3_retro.innerHTML = "❌ Respuesta incompleta. Busca mencionar que la metacognición es 'pensar sobre el propio pensamiento' o reflexionar sobre estrategias de aprendizaje.";
        q3_retro.className = "retro incorrecto";
      }

      // Q4: VF (F is correct)
      const q4_val = (document.querySelector('input[name="q4"]:checked')||{}).value;
      const q4_retro = document.querySelector('#q4 .retro');
      if (q4_val === "F") {
        q4_retro.textContent = "✅ Correcto. La autoevaluación aplica tanto en tareas escritas como prácticas.";
        q4_retro.className = "retro correcto";
        correctas++;
      } else {
        q4_retro.textContent = "❌ Incorrecto. La autoevaluación también es útil en trabajos prácticos.";
        q4_retro.className = "retro incorrecto";
      }

      // Q5: drag (Rúbrica de desempeño)
      const q5_zone = document.querySelector('#q5 .zona-soltar');
      const q5_retro = document.querySelector('#q5 .retro');
      if (cleanText(q5_zone.textContent) === cleanText(q5_zone.dataset.correcta)) {
        q5_retro.textContent = "✅ Correcto. Las rúbricas ayudan a objetivar la autoevaluación.";
        q5_retro.className = "retro correcto";
        correctas++;
      } else {
        q5_retro.innerHTML = `❌ Incorrecto. Respuesta: <b>${q5_zone.dataset.correcta}</b>`;
        q5_retro.className = "retro incorrecto";
      }

      // Q6: multiple (a is correct)
      const q6_val = (document.querySelector('input[name="q6"]:checked')||{}).value;
      const q6_retro = document.querySelector('#q6 .retro');
      if (q6_val === "a") {
        q6_retro.textContent = "✅ Correcto. Autonomía y autoconocimiento son beneficios reales.";
        q6_retro.className = "retro correcto";
        correctas++;
      } else {
        q6_retro.textContent = "❌ Incorrecto. La mejor opción es a) Autonomía y autoconocimiento.";
        q6_retro.className = "retro incorrecto";
      }

      // Q7: short (keywords: controlar, regular, ajustar, modificar, estrategias)
      const q7_txt = document.getElementById('q7_input').value;
      const q7_retro = document.querySelector('#q7 .retro');
      if (verificarShortAnswer(q7_txt, ['control','regular','ajust','modific','estrateg'])) {
        q7_retro.textContent = "✅ Bien: la autorregulación implica ajustar estrategias y controlar el propio proceso de aprendizaje.";
        q7_retro.className = "retro correcto";
        correctas++;
      } else {
        q7_retro.innerHTML = "❌ Respuesta incompleta. Menciona que autorregulación significa ajustar tu conducta o estrategias según lo que descubres en la autoevaluación.";
        q7_retro.className = "retro incorrecto";
      }

      // Q8: VF (V is correct)
      const q8_val = (document.querySelector('input[name="q8"]:checked')||{}).value;
      const q8_retro = document.querySelector('#q8 .retro');
      if (q8_val === "V") {
        q8_retro.textContent = "✅ Correcto. Honestidad y humildad son claves.";
        q8_retro.className = "retro correcto";
        correctas++;
      } else {
        q8_retro.textContent = "❌ Incorrecto. La honestidad y la humildad facilitan la mejora real.";
        q8_retro.className = "retro incorrecto";
      }

      // Q9: drag (Registro de errores y soluciones)
      const q9_zone = document.querySelector('#q9 .zona-soltar');
      const q9_retro = document.querySelector('#q9 .retro');
      if (cleanText(q9_zone.textContent) === cleanText(q9_zone.dataset.correcta)) {
        q9_retro.textContent = "✅ Correcto. Llevar registro ayuda a aprender de forma sistemática.";
        q9_retro.className = "retro correcto";
        correctas++;
      } else {
        q9_retro.innerHTML = `❌ Incorrecto. Respuesta: <b>${q9_zone.dataset.correcta}</b>`;
        q9_retro.className = "retro incorrecto";
      }

      // Q10: multiple (c correct)
      const q10_val = (document.querySelector('input[name="q10"]:checked')||{}).value;
      const q10_retro = document.querySelector('#q10 .retro');
      if (q10_val === "c") {
        q10_retro.textContent = "✅ Correcto. Humildad y responsabilidad son actitudes clave.";
        q10_retro.className = "retro correcto";
        correctas++;
      } else {
        q10_retro.textContent = "❌ Incorrecto. La opción correcta es c) Tener humildad y responsabilidad.";
        q10_retro.className = "retro incorrecto";
      }

      // Resultado final
      const resultado = document.getElementById('resultado');
      resultado.textContent = `Puntaje final: ${correctas} / ${total}`;
      resultado.style.color = (correctas >= 8) ? "var(--ok)" : "var(--bad)";

      // Scroll to resultado for mobile users
      resultado.scrollIntoView({behavior:'smooth', block:'center'});
    });

    // Accessibility: clear selected option if user clicks outside
    document.addEventListener('click', (e)=>{
      if(!e.target.classList.contains('opcion')) {
        opciones.forEach(x=>x.classList.remove('selected'));
      }
    });
  </script>
</body>
</html>
